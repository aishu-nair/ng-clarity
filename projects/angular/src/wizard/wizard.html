<!--
  ~ Copyright (c) 2016-2023 VMware, Inc. All Rights Reserved.
  ~ This software is released under MIT license.
  ~ The full license information can be found in LICENSE in the root directory of this project.
  -->

<clr-modal
  [clrModalOpen]="_open"
  [clrModalSize]="size"
  [clrModalClosable]="closable"
  [clrModalStaticBackdrop]="true"
  [clrModalPreventClose]="true"
  (clrModalAlternateClose)="modalCancel()"
  [clrModalLabelledById]="wizardId"
  [clrModalInitiallyFocusTitle]="false"
>
  <div class="modal-title">
    <div>
      <span cdkFocusInitial tabindex="-1" #currentPageTitle class="clr-wizard-current-page-title">
        <ng-template [ngTemplateOutlet]="navService.currentPageNavTitle"></ng-template>
      </span>
      <span class="clr-wizard-title-divider"></span>
      <span class="clr-wizard-title">
        <ng-content select="clr-wizard-title"></ng-content>
      </span>
    </div>
  </div>

  <div class="modal-header-actions" *ngIf="headerActionService.displayHeaderActionsWrapper">
    <div *ngIf="headerActionService.showWizardHeaderActions">
      <ng-content select="clr-wizard-header-action"></ng-content>
    </div>
    <div *ngIf="headerActionService.currentPageHasHeaderActions">
      <ng-template [ngTemplateOutlet]="navService.currentPage.headerActions"></ng-template>
    </div>
  </div>

  <div class="modal-body">
    <nav class="clr-wizard-stepnav-wrapper">
      <clr-wizard-stepnav></clr-wizard-stepnav>
    </nav>
    <main clr-wizard-pages-wrapper class="clr-wizard-content">
      <h3 *ngIf="navService.currentPage.pageNavTitle" class="clr-wizard-page-title">
        <ng-template [ngTemplateOutlet]="navService.currentPageTitle"></ng-template>
      </h3>
      <ng-content></ng-content>
    </main>
    <div class="clr-wizard-footer">
      <div class="clr-wizard-footer-buttons">
        <div
          *ngIf="navService.currentPage && !navService.currentPage.hasButtons"
          class="clr-wizard-footer-buttons-wrapper"
        >
          <ng-content select="clr-wizard-button"></ng-content>
        </div>
        <div
          *ngIf="navService.currentPage && navService.currentPage.hasButtons"
          class="clr-wizard-footer-buttons-wrapper"
        >
          <ng-template [ngTemplateOutlet]="navService.currentPage.buttons"></ng-template>
        </div>
      </div>
    </div>
  </div>
</clr-modal>
